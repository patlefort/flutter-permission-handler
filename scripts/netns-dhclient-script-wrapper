#!/usr/bin/env -S bash -eu

dhclient-script "$@"

while read -d $'\0' _resolvfile; do
	cat "$_resolvfile" > '/etc/resolv.conf' && \
		rm -f "$_resolvfile"
done < <(find /etc -type f -mindepth 1 -maxdepth 1 -iname 'resolv.conf.dhclient-new*' -print0)

chmod o+r '/etc/resolv.conf'
